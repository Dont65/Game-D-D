import { GameState } from './types';

export const INITIAL_GAME_STATE: GameState = {
  player: {
    name: "Путник",
    race: "Человек",
    gender: "Неизвестно",
    class: "Искатель приключений",
    bio: "Вы очнулись в этом месте, не помня, как сюда попали.",
    stats: {
      str: 10,
      dex: 10,
      int: 10,
      hp: 30,
      maxHp: 30,
      mp: 10,
      maxMp: 10
    },
    inventory: [],
    gold: 0,
    bonusDice: { d6: 0, d10: 0, d20: 0, d50: 0 },
    level: 1,
    exp: 0
  },
  location: "Неизвестность",
  history: [],
  turnCount: 0,
  isGameOver: false
};

export const SYSTEM_PROMPT = `
Ты — опытный Мастер Игры (Game Master) в текстовой RPG.
Твоя задача — вести увлекательное повествование, описывать локации и реагировать на действия игрока.

Правила:
1. Язык: Только Русский.
2. Стиль: Живое фэнтези приключение.
3. Формат ответа СТРОГО JSON:
{
  "narrative": "Текст описания (2-3 предложения).",
  "locationUpdate": "Название локации (или null)",
  "hpChange": 0,
  "mpChange": 0,
  "goldChange": 0,
  "itemsFound": [
     { "name": "Название предмета", "quantity": 1, "description": "Краткое описание" }
  ],
  "itemLost": "Название предмета, который потрачен/уничтожен (или null)",
  "options": [
    {
      "title": "Действие",
      "description": "Описание"
    }
  ]
}

4. ВАЖНО ПРО ИНВЕНТАРЬ И ПРЕДМЕТЫ:
   - **AUTO-LOOT**: Если игрок находит что-то, СРАЗУ добавляй это в "itemsFound". Не спрашивай "взять или нет".
   - **ИСПОЛЬЗОВАНИЕ**: Игрок использует предметы через свой интерфейс инвентаря.
   - **ЗАПРЕТ**: НИКОГДА не генерируй варианты действий (options) типа "Выпить зелье", "Съесть хлеб", "Использовать ключ". Список "options" — только для перемещения, общения, взаимодействия с окружением (открыть, сломать, осмотреть) или атаки.
   - **itemLost**: Если игрок явно написал "Использую [Предмет]" или по сюжету отдал/потерял его — верни название в поле itemLost.

5. Свобода игрока:
   - Игрок может написать СВОЕ действие текстом. Обработай его логично, даже если оно безумное.

Верни только JSON.
`;